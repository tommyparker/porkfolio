---
import Layout from '../layouts/Layout.astro';
import Container from '../layouts/Container.astro';
import Greeting from '../components/Greeting';
import Masonry from '../components/Masonry';
import Project from '../components/Project.astro';

import { getCollection } from 'astro:content';

const projects = await getCollection('projects');

const pageTitle = "Work";

---

<Layout pageTitle={pageTitle}>
	<Container class="min-h-[30svh] flex flex-col">
		<Greeting client:load messages={["Hey", "Howdy", "Hey there", "Yo", "Hello there", "Why hello"]} class="mt-auto" />
	</Container>
  <div class="p-4">
    <Masonry client:only="preact">
      {
        projects.map((project, index) => (
          <Project url={`/projects/${project.slug}/`} title={project.data.title} client={project.data.client} thumbnail={project.data.thumbnail} index={index}/>
        ))
      }
    </Masonry>
  </div>
</Layout>